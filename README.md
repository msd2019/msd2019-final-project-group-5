# Final Project for Modeling Social Data, 2019

Group 5
Wen Ding wd2288
Lily Ma jm4303
Lina Tian yt2511

This repository has code to attempt to replicate and extend the results in Predicting the Present with Google Trends by Hyunyoung Choi, Hal Varian, December 18, 2011 (The Economic Record, 2012). (We have only replicated the automotive example.)

A complete current report of our results is in `08_final_report.pdf`, which can be generated by cloning this repository and running `make` to execute the commands in the `Makefile` file. All data are in `data/` and any original source code provided by the authors is in `authors_original_code/`.

The repository is structured as follows:

1. `01_get_original_data.sh` gets the original code, and places it in the author_original_code; finds the merged.csv file within the original code, and places a copy in `data/` (the original data come already cleaned).
2. `02_get_04_08_data.sh` gets 2004-2008 automotive sales data from US Census Bureau, gets 2004-2008 google trends data for categories "Trucks & suvs" and "auto insurance", renames them, and places them in `data/`
3. `03_clean_04_08_data.R` cleans this data and saves the relevant csv file (merged_04_08.csv) in `data/`
4. `04_get_09_13_data.sh` gets 2009-2013 automotive sales data from US Census Bureau, gets 2009-2013 google trends data for categories "Trucks & suvs" and "auto insurance", renames them, and places them in `data/`
5. `05_clean_09_13_data.R` cleans this data and saves the relevant csv file (merged_09_13.csv) in `data/`
6. `06_get_14_19_data.sh` gets 2014-2019 automotive sales data from US Census Bureau, gets 2014-2019 google trends data for categories "Trucks & suvs" and "auto insurance", renames them, and places them in `data/`
7. `07_clean_14_19_data.R` cleans this data and saves the relevant csv file (merged_04_19.csv) in `data/`
8. `08_final_report.Rmd` analysis both the original and new data to replicate and extend the results of the original paper, and produces the final report `08_draft_report.html`
9. `oosf_new.R` contains out of sample forecasting functions, some of which provided by the authors and some of which written by us, that will be used in `08_final_report.Rmd`
10. `getEvaluation.R` contains helper functions written by us to combine the in-sample forecast, out of sample forecast, MAE report, and graphing. 
----

Notes:
1. In this folder, we kept all the files produced by running `Makefile`, but you will get the same files if you only keep the files and folders mentioned in this README and run `make` in command line. 
2. The link for google trends expires after a day, so if you want to test out or code, there is no way except you manually change the links and rerun the makefile. As a result, our merged data and the source data has a little discrepancy. Since we downloaded the data using the makefile couple times, and each time the data we get are different, we used the first version of merged data to write our conclusions, but later we realized that the data are different. So we noted this difference at the end of our paper in Part 5.2. 




